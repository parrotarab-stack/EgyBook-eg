<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ù…Ø´Ø±Ù Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© - EgyBook</title>
    <link rel="stylesheet" href="../../css/style.css">
    <style>
        /* Ø£Ù†Ù…Ø§Ø· Ù„ÙˆØ­Ø© Ù…Ø´Ø±Ù Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© */
        .moderator-dashboard {
            min-height: 100vh;
            background: linear-gradient(135deg, #0c5460 0%, #0d2b5a 100%);
            color: white;
            font-family: 'Arial', sans-serif;
        }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .moderator-header {
            background: linear-gradient(135deg, rgba(39,174,96,0.9) 0%, rgba(33,150,83,0.9) 100%);
            padding: 20px 30px;
            border-bottom: 4px solid #d4af37;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .moderator-logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .moderator-logo h1 {
            font-size: 2.2rem;
            color: white;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .governorate-badge {
            background: #d4af37;
            color: #2d2424;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1.1rem;
            border: 2px solid white;
        }
        
        .moderator-info {
            display: flex;
            align-items: center;
            gap: 25px;
        }
        
        .moderator-profile {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .moderator-avatar {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: #2d2424;
            border: 2px solid white;
        }
        
        .moderator-details h3 {
            margin: 0;
            color: white;
            font-size: 1.2rem;
        }
        
        .moderator-details p {
            margin: 5px 0 0 0;
            color: rgba(255,255,255,0.9);
            font-size: 0.9rem;
        }
        
        .moderator-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .mod-header-btn {
            padding: 10px 20px;
            border: 2px solid white;
            background: rgba(255,255,255,0.2);
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .mod-header-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
        
        .mod-header-btn.logout {
            background: rgba(206,17,38,0.2);
            border-color: rgba(206,17,38,0.5);
            color: #ffcccc;
        }
        
        .mod-header-btn.logout:hover {
            background: rgba(206,17,38,0.3);
        }
        
        /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .moderator-container {
            max-width: 1400px;
            margin: 30px auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 25px;
        }
        
        /* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ */
        .moderator-sidebar {
            background: linear-gradient(135deg, rgba(39,174,96,0.9) 0%, rgba(33,150,83,0.9) 100%);
            border-radius: 20px;
            padding: 25px;
            border: 3px solid #d4af37;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            height: fit-content;
            position: sticky;
            top: 100px;
        }
        
        .mod-sidebar-title {
            color: white;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255,255,255,0.3);
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .moderator-nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .moderator-nav li {
            margin-bottom: 10px;
        }
        
        .moderator-nav a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            border-radius: 10px;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }
        
        .moderator-nav a:hover, .moderator-nav a.active {
            background: rgba(255,255,255,0.2);
            color: white;
            border-color: rgba(255,255,255,0.3);
            transform: translateX(-5px);
        }
        
        .mod-nav-icon {
            font-size: 1.2rem;
            width: 25px;
            text-align: center;
        }
        
        /* Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© */
        .governorate-stats {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid rgba(255,255,255,0.2);
        }
        
        .gov-stat-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .gov-stat-label {
            color: rgba(255,255,255,0.8);
        }
        
        .gov-stat-value {
            color: white;
            font-weight: bold;
        }
        
        /* Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
        .mod-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .mod-stat-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            border-radius: 15px;
            padding: 25px;
            border: 2px solid rgba(212,175,55,0.5);
            transition: all 0.3s ease;
            cursor: pointer;
            backdrop-filter: blur(10px);
        }
        
        .mod-stat-card:hover {
            transform: translateY(-5px);
            border-color: #d4af37;
            box-shadow: 0 15px 30px rgba(0,0,0,0.4);
            background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.1) 100%);
        }
        
        .mod-stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .mod-stat-icon {
            font-size: 2.5rem;
            opacity: 0.9;
        }
        
        .mod-stat-title {
            color: rgba(255,255,255,0.9);
            font-size: 1rem;
            margin: 0;
        }
        
        .mod-stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
            margin: 10px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ */
        .moderator-main {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        /* Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø³Ø±ÙŠØ¹Ø© */
        .quick-lists {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .quick-list-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            border-radius: 20px;
            padding: 25px;
            border: 2px solid rgba(212,175,55,0.5);
            backdrop-filter: blur(10px);
        }
        
        .list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255,255,255,0.2);
        }
        
        .list-title {
            color: #d4af37;
            margin: 0;
            font-size: 1.3rem;
        }
        
        .list-actions {
            display: flex;
            gap: 10px;
        }
        
        .list-btn {
            padding: 8px 15px;
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .list-btn:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .moderator-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .moderator-table th {
            background: rgba(212,175,55,0.3);
            color: white;
            padding: 15px;
            text-align: right;
            border-bottom: 2px solid rgba(212,175,55,0.5);
            font-weight: bold;
        }
        
        .moderator-table td {
            padding: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.9);
        }
        
        .moderator-table tr:hover {
            background: rgba(255,255,255,0.1);
        }
        
        .mod-status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
            display: inline-block;
        }
        
        .mod-status-pending {
            background: rgba(241,196,15,0.3);
            color: #f1c40f;
        }
        
        .mod-status-approved {
            background: rgba(39,174,96,0.3);
            color: #27ae60;
        }
        
        .mod-status-rejected {
            background: rgba(206,17,38,0.3);
            color: #ff6b6b;
        }
        
        .mod-action-buttons {
            display: flex;
            gap: 8px;
        }
        
        .mod-action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            color: white;
            font-weight: bold;
        }
        
        .mod-action-btn.approve {
            background: rgba(39,174,96,0.5);
        }
        
        .mod-action-btn.reject {
            background: rgba(206,17,38,0.5);
        }
        
        .mod-action-btn.view {
            background: rgba(30,58,138,0.5);
        }
        
        .mod-action-btn:hover {
            transform: translateY(-2px);
            opacity: 0.9;
        }
        
        /* Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù‡Ø§Ù…Ø© */
        .important-alerts {
            background: linear-gradient(135deg, rgba(206,17,38,0.2) 0%, rgba(160,0,0,0.2) 100%);
            border-radius: 20px;
            padding: 25px;
            border: 3px solid rgba(206,17,38,0.5);
            margin-bottom: 30px;
        }
        
        .alerts-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            color: #ff6b6b;
        }
        
        .alerts-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .alert-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            border-right: 4px solid #ce1126;
        }
        
        .alert-icon {
            font-size: 1.5rem;
        }
        
        .alert-content {
            flex: 1;
        }
        
        .alert-title {
            color: white;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .alert-description {
            color: rgba(255,255,255,0.8);
            font-size: 0.9rem;
        }
        
        /* Ø§Ù„ÙÙˆØªØ± */
        .moderator-footer {
            text-align: center;
            padding: 25px;
            background: linear-gradient(135deg, rgba(39,174,96,0.9) 0%, rgba(33,150,83,0.9) 100%);
            border-top: 4px solid #d4af37;
            margin-top: 40px;
            color: white;
        }
        
        .mod-footer-links {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .mod-footer-links a {
            color: #d4af37;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .mod-footer-links a:hover {
            color: white;
            text-decoration: underline;
        }
        
        /* Ø§Ù„ØªØ¬Ø§ÙˆØ¨ */
        @media (max-width: 1200px) {
            .moderator-container {
                grid-template-columns: 1fr;
            }
            
            .moderator-sidebar {
                position: static;
                margin-bottom: 20px;
            }
            
            .quick-lists {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .moderator-header {
                padding: 15px 20px;
            }
            
            .header-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .moderator-info {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
                width: 100%;
            }
            
            .moderator-actions {
                width: 100%;
                justify-content: space-between;
            }
            
            .mod-stats-grid {
                grid-template-columns: 1fr;
            }
            
            .moderator-table {
                display: block;
                overflow-x: auto;
            }
            
            .mod-footer-links {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body class="moderator-dashboard">
    <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
    <header class="moderator-header">
        <div class="header-content">
            <div class="moderator-logo">
                <h1>ğŸ›ï¸ Ù„ÙˆØ­Ø© Ù…Ø´Ø±Ù Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</h1>
                <div class="governorate-badge" id="governorateBadge">Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</div>
            </div>
            
            <div class="moderator-info">
                <div class="moderator-profile">
                    <div class="moderator-avatar" id="moderatorAvatar">ğŸ›ï¸</div>
                    <div class="moderator-details">
                        <h3 id="moderatorName">Ù…Ø´Ø±Ù Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</h3>
                        <p>Ù…Ø´Ø±Ù Ù…Ø­Ù„ÙŠ - ØµÙ„Ø§Ø­ÙŠØ§Øª Ù…Ø­Ø¯ÙˆØ¯Ø©</p>
                        <p id="moderatorGovernorate" style="color: #d4af37; font-weight: bold;"></p>
                    </div>
                </div>
                
                <div class="moderator-actions">
                    <button class="mod-header-btn" id="refreshBtn">
                        <span>ğŸ”„</span>
                        ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    </button>
                    <button class="mod-header-btn" onclick="window.location.href='../user/feed.html'">
                        <span>ğŸ‘ï¸</span>
                        Ù…Ø´Ø§Ù‡Ø¯Ø© ÙƒØ²Ø§Ø¦Ø±
                    </button>
                    <button class="mod-header-btn logout" id="logoutBtn">
                        <span>ğŸšª</span>
                        ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <div class="moderator-container">
        <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ -->
        <aside class="moderator-sidebar">
            <h3 class="mod-sidebar-title">
                <span>ğŸ“‹</span>
                Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø­Ù„ÙŠ
            </h3>
            
            <nav class="moderator-nav">
                <ul>
                    <li><a href="#dashboard" class="active">
                        <span class="mod-nav-icon">ğŸ“Š</span>
                        <span>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</span>
                    </a></li>
                    
                    <li><a href="#posts">
                        <span class="mod-nav-icon">ğŸ“</span>
                        <span>Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</span>
                        <span class="badge" id="postsBadge">0</span>
                    </a></li>
                    
                    <li><a href="#reports">
                        <span class="mod-nav-icon">ğŸš¨</span>
                        <span>Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</span>
                        <span class="badge" id="reportsBadge">0</span>
                    </a></li>
                    
                    <li><a href="#users">
                        <span class="mod-nav-icon">ğŸ‘¥</span>
                        <span>Ù…Ø³ØªØ®Ø¯Ù…ÙŠ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</span>
                        <span class="badge" id="usersBadge">0</span>
                    </a></li>
                    
                    <li><a href="#ads">
                        <span class="mod-nav-icon">ğŸ’°</span>
                        <span>Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</span>
                        <span class="badge" id="adsBadge">0</span>
                    </a></li>
                    
                    <li><a href="#moderation">
                        <span class="mod-nav-icon">ğŸ›¡ï¸</span>
                        <span>Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù…Ø­Ù„ÙŠØ©</span>
                    </a></li>
                    
                    <li><a href="#analytics">
                        <span class="mod-nav-icon">ğŸ“ˆ</span>
                        <span>ØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</span>
                    </a></li>
                    
                    <li><a href="#settings">
                        <span class="mod-nav-icon">âš™ï¸</span>
                        <span>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</span>
                    </a></li>
                </ul>
            </nav>
            
            <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© -->
            <div class="governorate-stats">
                <h4 style="color: #d4af37; margin-bottom: 15px;">ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</h4>
                <div class="gov-stat-item">
                    <span class="gov-stat-label">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:</span>
                    <span class="gov-stat-value" id="statUsers">0</span>
                </div>
                <div class="gov-stat-item">
                    <span class="gov-stat-label">Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©:</span>
                    <span class="gov-stat-value" id="statPosts">0</span>
                </div>
                <div class="gov-stat-item">
                    <span class="gov-stat-label">Ø§Ù„Ù…ØªØµÙØ­ÙŠÙ† Ø§Ù„Ø¢Ù†:</span>
                    <span class="gov-stat-value" id="statOnline">0</span>
                </div>
                <div class="gov-stat-item">
                    <span class="gov-stat-label">Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„ÙŠÙˆÙ…:</span>
                    <span class="gov-stat-value" id="statReports">0</span>
                </div>
                <div class="gov-stat-item">
                    <span class="gov-stat-label">Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©:</span>
                    <span class="gov-stat-value" id="statAds">0</span>
                </div>
            </div>
        </aside>

        <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ -->
        <main class="moderator-main">
            <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø© -->
            <div class="mod-stats-grid">
                <div class="mod-stat-card">
                    <div class="mod-stat-header">
                        <h3 class="mod-stat-title">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø§Ù„Ù†Ø´Ø·ÙˆÙ†</h3>
                        <span class="mod-stat-icon">ğŸ‘¥</span>
                    </div>
                    <div class="mod-stat-value" id="activeUsers">0</div>
                    <div style="color: rgba(255,255,255,0.7); font-size: 0.9rem;">ÙÙŠ Ù…Ø­Ø§ÙØ¸ØªÙƒ</div>
                </div>
                
                <div class="mod-stat-card">
                    <div class="mod-stat-header">
                        <h3 class="mod-stat-title">Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„ÙŠÙˆÙ…</h3>
                        <span class="mod-stat-icon">ğŸ“</span>
                    </div>
                    <div class="mod-stat-value" id="todayPosts">0</div>
                    <div style="color: rgba(255,255,255,0.7); font-size: 0.9rem;">Ù…Ù†Ø´ÙˆØ± Ø¬Ø¯ÙŠØ¯</div>
                </div>
                
                <div class="mod-stat-card">
                    <div class="mod-stat-header">
                        <h3 class="mod-stat-title">Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</h3>
                        <span class="mod-stat-icon">ğŸš¨</span>
                    </div>
                    <div class="mod-stat-value" id="newReports">0</div>
                    <div style="color: rgba(255,255,255,0.7); font-size: 0.9rem;">Ø¨Ø­Ø§Ø¬Ø© Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</div>
                </div>
                
                <div class="mod-stat-card">
                    <div class="mod-stat-header">
                        <h3 class="mod-stat-title">Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙØ§Ø¹Ù„</h3>
                        <span class="mod-stat-icon">ğŸ“ˆ</span>
                    </div>
                    <div class="mod-stat-value" id="engagementRate">0%</div>
                    <div style="color: rgba(255,255,255,0.7); font-size: 0.9rem;">ØªÙØ§Ø¹Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</div>
                </div>
            </div>

            <!-- Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù‡Ø§Ù…Ø© -->
            <div class="important-alerts">
                <div class="alerts-header">
                    <span style="font-size: 2rem;">âš ï¸</span>
                    <h2 style="margin: 0;">ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ù‡Ø§Ù…Ø© ØªØªØ·Ù„Ø¨ Ø§Ù„ØªØ¯Ø®Ù„</h2>
                </div>
                <div class="alerts-list" id="alertsList">
                    <!-- Ø³ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ù‡Ù†Ø§ -->
                    <div class="alert-item">
                        <span class="alert-icon">ğŸ“¢</span>
                        <div class="alert-content">
                            <div class="alert-title">Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø­Ù„ÙŠØ©</div>
                            <div class="alert-description">
                                Ø£Ù†Øª Ø§Ù„Ø¢Ù† Ù…Ø´Ø±Ù Ù…Ø­Ø§ÙØ¸Ø©. ÙŠÙ…ÙƒÙ†Ùƒ Ù…Ø±Ø§Ù‚Ø¨Ø© ÙˆØ¥Ø¯Ø§Ø±Ø© Ù…Ø­ØªÙˆÙ‰ Ù…Ø­Ø§ÙØ¸ØªÙƒ ÙÙ‚Ø·.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø³Ø±ÙŠØ¹Ø© -->
            <div class="quick-lists">
                <!-- Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø¨Ø­Ø§Ø¬Ø© Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© -->
                <div class="quick-list-card">
                    <div class="list-header">
                        <h3 class="list-title">â³ Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø¨Ø­Ø§Ø¬Ø© Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</h3>
                        <div class="list-actions">
                            <button class="list-btn" onclick="viewAllPendingPosts()">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</button>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table class="moderator-table">
                            <thead>
                                <tr>
                                    <th>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>
                                    <th>Ø§Ù„Ù…Ø­ØªÙˆÙ‰</th>
                                    <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                    <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</th>
                                </tr>
                            </thead>
                            <tbody id="pendingPostsTable">
                                <!-- Ø³ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ù‡Ù†Ø§ -->
                                <tr>
                                    <td colspan="4" style="text-align: center; padding: 30px;">
                                        <div style="color: rgba(255,255,255,0.7);">
                                            Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø¨Ø­Ø§Ø¬Ø© Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Ø¨Ù„Ø§ØºØ§Øª Ø¬Ø¯ÙŠØ¯Ø© -->
                <div class="quick-list-card">
                    <div class="list-header">
                        <h3 class="list-title">ğŸš¨ Ø¨Ù„Ø§ØºØ§Øª Ø¬Ø¯ÙŠØ¯Ø©</h3>
                        <div class="list-actions">
                            <button class="list-btn" onclick="viewAllReports()">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</button>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table class="moderator-table">
                            <thead>
                                <tr>
                                    <th>Ø§Ù„Ø¨Ù„Ø§Øº</th>
                                    <th>Ø§Ù„Ù†ÙˆØ¹</th>
                                    <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
                                    <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</th>
                                </tr>
                            </thead>
                            <tbody id="reportsTable">
                                <!-- Ø³ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª Ù‡Ù†Ø§ -->
                                <tr>
                                    <td colspan="4" style="text-align: center; padding: 30px;">
                                        <div style="color: rgba(255,255,255,0.7);">
                                            Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨Ù„Ø§ØºØ§Øª Ø¬Ø¯ÙŠØ¯Ø©
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Ø§Ù„ÙÙˆØªØ± -->
    <footer class="moderator-footer">
        <div>
            <p>Â© 2023 EgyBook - Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª | Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
            <div class="mod-footer-links">
                <a href="#" onclick="showHelp()">â“ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©</a>
                <a href="#" onclick="showGuidelines()">ğŸ“œ Ø§Ù„Ø¥Ø±Ø´Ø§Ø¯Ø§Øª</a>
                <a href="#" onclick="contactSuperAdmin()">ğŸ“ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…Ø´Ø±Ù Ø§Ù„Ø¹Ø§Ù…</a>
                <a href="../../index.html">ğŸ  Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            </div>
            <p style="margin-top: 15px; color: #d4af37; font-weight: bold; font-size: 1.1rem;">
                ğ“‚€ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…Ø­Ù„ÙŠ - ØµÙ†Ø¹ ÙÙŠ Ù…ØµØ± ğ“‚€
            </p>
        </div>
    </footer>

    <!-- Ù…Ù„Ù JavaScript -->
    <script>
        // Ù†Ø¸Ø§Ù… Ù„ÙˆØ­Ø© Ù…Ø´Ø±Ù Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ›ï¸ ØªØ­Ù…ÙŠÙ„ Ù„ÙˆØ­Ø© Ù…Ø´Ø±Ù Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©...');
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„
            checkModeratorAccess();
            
            // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©
            loadGovernorateData();
            
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
            setupModeratorEvents();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©
            setInterval(loadGovernorateData, 30000);
        });
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„
        function checkModeratorAccess() {
            const currentAdmin = JSON.parse(localStorage.getItem('current_admin'));
            
            if (!currentAdmin) {
                // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ù…Ø´Ø±Ù Ù…Ø³Ø¬Ù„ØŒ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„ØµÙØ­Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„
                window.location.href = 'login.html';
                return;
            }
            
            if (currentAdmin.role !== 'moderator') {
                // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø´Ø±Ù Ø¹Ø§Ù…ØŒ ÙŠØ°Ù‡Ø¨ Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø´Ø±Ù Ø§Ù„Ø¹Ø§Ù…
                if (currentAdmin.role === 'super_admin') {
                    window.location.href = 'dashboard.html';
                    return;
                }
                // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…Ø´Ø±Ù Ù…Ø­Ø§ÙØ¸Ø©ØŒ ÙŠØ¹ÙˆØ¯ Ù„Ù„Ø¯Ø®ÙˆÙ„
                window.location.href = 'login.html';
                return;
            }
            
            // Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø±Ù
            displayModeratorInfo(currentAdmin);
        }
        
        // Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø±Ù
        function displayModeratorInfo(moderator) {
            document.getElementById('moderatorName').textContent = moderator.name;
            document.getElementById('moderatorGovernorate').textContent = moderator.governorate;
            document.getElementById('governorateBadge').textContent = moderator.governorate;
            
            // ØµÙˆØ±Ø© Ø±Ù…Ø²ÙŠØ©
            const firstLetter = moderator.name.charAt(0);
            document.getElementById('moderatorAvatar').textContent = firstLetter;
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©
        function loadGovernorateData() {
            const currentAdmin = JSON.parse(localStorage.getItem('current_admin'));
            if (!currentAdmin) return;
            
            const governorate = currentAdmin.governorate;
            console.log(`ğŸ“Š Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ø§ÙØ¸Ø© ${governorate}...`);
            
            // ØªØ­Ù…ÙŠÙ„ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©
            loadGovernorateStats(governorate);
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
            loadAlerts(governorate);
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù„Ù‚Ø©
            loadPendingPosts(governorate);
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª
            loadReports(governorate);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø§Ø±Ø§Øª
            updateModeratorBadges(governorate);
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©
        function loadGovernorateStats(governorate) {
            const systemData = JSON.parse(localStorage.getItem('egybook_system') || '{}');
            
            // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†
            const users = systemData.users || [];
            const govUsers = users.filter(u => u.governorate === governorate);
            const activeUsers = govUsers.filter(u => u.status === 'active').length;
            
            // Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª
            const posts = systemData.posts || [];
            const govPosts = posts.filter(p => p.governorate === governorate);
            const today = new Date().toDateString();
            const todayPosts = govPosts.filter(p => 
                new Date(p.createdAt).toDateString() === today
            ).length;
            
            // Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª
            const reports = systemData.reports || [];
            const govReports = reports.filter(r => {
                // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©
                const post = posts.find(p => p.id == r.postId);
                return post && post.governorate === governorate;
            });
            const newReports = govReports.filter(r => r.status === 'pending').length;
            
            // Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
            const govAds = govPosts.filter(p => p.isSponsored).length;
            
            // Ø­Ø³Ø§Ø¨ Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙØ§Ø¹Ù„
            const totalLikes = govPosts.reduce((sum, post) => sum + (post.likes ? post.likes.length : 0), 0);
            const totalComments = govPosts.reduce((sum, post) => sum + (post.comments ? post.comments.length : 0), 0);
            const engagementRate = govUsers.length > 0 ? 
                Math.round((totalLikes + totalComments) / govUsers.length * 100) : 0;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            document.getElementById('statUsers').textContent = govUsers.length;
            document.getElementById('statPosts').textContent = govPosts.length;
            document.getElementById('statOnline').textContent = Math.floor(govUsers.length * 0.1); // Ù…Ø­Ø§ÙƒØ§Ø©
            document.getElementById('statReports').textContent = govReports.length;
            document.getElementById('statAds').textContent = govAds;
            
            document.getElementById('activeUsers').textContent = activeUsers;
            document.getElementById('todayPosts').textContent = todayPosts;
            document.getElementById('newReports').textContent = newReports;
            document.getElementById('engagementRate').textContent = `${engagementRate}%`;
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
        function loadAlerts(governorate) {
            const systemData = JSON.parse(localStorage.getItem('egybook_system') || '{}');
            const posts = systemData.posts || [];
            const reports = systemData.reports || [];
            
            const govPosts = posts.filter(p => p.governorate === governorate);
            const govReports = reports.filter(r => {
                const post = posts.find(p => p.id == r.postId);
                return post && post.governorate === governorate;
            });
            
            const alerts = [];
            
            // ØªØ­Ø°ÙŠØ± Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø¨Ù„Ø§ØºØ§Øª Ø¹Ø§Ù„Ù‚Ø©
            const pendingReports = govReports.filter(r => r.status === 'pending');
            if (pendingReports.length > 0) {
                alerts.push({
                    icon: 'ğŸš¨',
                    title: `Ø¨Ù„Ø§ØºØ§Øª Ø¹Ø§Ù„Ù‚Ø© (${pendingReports.length})`,
                    description: 'Ù‡Ù†Ø§Ùƒ Ø¨Ù„Ø§ØºØ§Øª Ø¨Ø­Ø§Ø¬Ø© Ù„Ù…Ø±Ø§Ø¬Ø¹ØªÙƒ ÙÙˆØ±Ù‹Ø§'
                });
            }
            
            // ØªØ­Ø°ÙŠØ± Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ù…Ù†Ø´ÙˆØ±Ø§Øª Ù…Ø³ÙŠØ¦Ø©
            const abusivePosts = govPosts.filter(p => 
                p.content && (
                    p.content.includes('Ø´ØªÙŠÙ…Ø©') || 
                    p.content.includes('Ø¥Ø³Ø§Ø¡Ø©') || 
                    p.content.toLowerCase().includes('Ø³ÙƒØ³')
                )
            );
            
            if (abusivePosts.length > 0) {
                alerts.push({
                    icon: 'âš ï¸',
                    title: `Ù…Ù†Ø´ÙˆØ±Ø§Øª Ù…Ø³ÙŠØ¦Ø© (${abusivePosts.length})`,
                    description: 'ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ù…Ø­ØªÙˆÙ‰ Ù…Ø³ÙŠØ¡ Ø¨Ø­Ø§Ø¬Ø© Ù„Ù„Ø­Ø°Ù'
                });
            }
            
            // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
            const alertsList = document.getElementById('alertsList');
            
            if (alerts.length === 0) {
                alertsList.innerHTML = `
                    <div class="alert-item">
                        <span class="alert-icon">âœ…</span>
                        <div class="alert-content">
                            <div class="alert-title">Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</div>
                            <div class="alert-description">
                                ÙƒÙ„ Ø§Ù„Ø£Ù…ÙˆØ± ØªØ­Øª Ø§Ù„Ø³ÙŠØ·Ø±Ø© ÙÙŠ Ù…Ø­Ø§ÙØ¸Ø© ${governorate}
                            </div>
                        </div>
                    </div>
                `;
            } else {
                alertsList.innerHTML = alerts.map(alert => `
                    <div class="alert-item">
                        <span class="alert-icon">${alert.icon}</span>
                        <div class="alert-content">
                            <div class="alert-title">${alert.title}</div>
                            <div class="alert-description">${alert.description}</div>
                        </div>
                    </div>
                `).join('');
            }
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù„Ù‚Ø©
        function loadPendingPosts(governorate) {
            const systemData = JSON.parse(localStorage.getItem('egybook_system') || '{}');
            const posts = systemData.posts || [];
            const users = systemData.users || [];
            
            // Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© Ø§Ù„ØªÙŠ Ù‚Ø¯ ØªØ­ØªØ§Ø¬ Ù…Ø±Ø§Ø¬Ø¹Ø©
            const govPosts = posts
                .filter(p => p.governorate === governorate)
                .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
                .slice(0, 5);
            
            const tbody = document.getElementById('pendingPostsTable');
            
            if (govPosts.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="4" style="text-align: center; padding: 30px;">
                            <div style="color: rgba(255,255,255,0.7);">
                                Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø¨Ø­Ø§Ø¬Ø© Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©
                            </div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = govPosts.map(post => {
                const user = users.find(u => u.id === post.userId) || { name: 'Ù…Ø³ØªØ®Ø¯Ù…' };
                const content = post.content.length > 50 ? 
                    post.content.substring(0, 50) + '...' : post.content;
                const date = new Date(post.createdAt).toLocaleDateString('ar-EG');
                
                // ØªØ­Ø¯ÙŠØ¯ Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠØ­ØªØ§Ø¬ Ù…Ø±Ø§Ø¬Ø¹Ø©
                const needsReview = post.content && (
                    post.content.includes('Ø´ØªÙŠÙ…Ø©') || 
                    post.content.includes('Ø¥Ø³Ø§Ø¡Ø©') ||
                    post.content.toLowerCase().includes('Ø³ÙƒØ³') ||
                    post.content.length < 5
                );
                
                if (!needsReview) return '';
                
                return `
                    <tr>
                        <td>${user.name}</td>
                        <td>${content}</td>
                        <td>${date}</td>
                        <td>
                            <div class="mod-action-buttons">
                                <button class="mod-action-btn view" onclick="viewPost('${post.id}')">
                                    Ø¹Ø±Ø¶
                                </button>
                                <button class="mod-action-btn approve" onclick="approvePost('${post.id}')">
                                    âœ“
                                </button>
                                <button class="mod-action-btn reject" onclick="rejectPost('${post.id}')">
                                    âœ—
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
            
            // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ù…Ù†Ø´ÙˆØ±Ø§Øª ØªØ­ØªØ§Ø¬ Ù…Ø±Ø§Ø¬Ø¹Ø©
            if (tbody.innerHTML.trim() === '') {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="4" style="text-align: center; padding: 30px;">
                            <div style="color: rgba(255,255,255,0.7);">
                                Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø¨Ø­Ø§Ø¬Ø© Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©
                            </div>
                        </td>
                    </tr>
                `;
            }
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª
        function loadReports(governorate) {
            const systemData = JSON.parse(localStorage.getItem('egybook_system') || '{}');
            const reports = systemData.reports || [];
            const posts = systemData.posts || [];
            const users = systemData.users || [];
            
            // Ø¨Ù„Ø§ØºØ§Øª Ù…ØªØ¹Ù„Ù‚Ø© Ø¨Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©
            const govReports = reports
                .filter(r => {
                    const post = posts.find(p => p.id == r.postId);
                    return post && post.governorate === governorate;
                })
                .sort((a, b) => new Date(b.reportedAt) - new Date(a.reportedAt))
                .slice(0, 5);
            
            const tbody = document.getElementById('reportsTable');
            
            if (govReports.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="4" style="text-align: center; padding: 30px;">
                            <div style="color: rgba(255,255,255,0.7);">
                                Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨Ù„Ø§ØºØ§Øª Ø¬Ø¯ÙŠØ¯Ø©
                            </div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = govReports.map(report => {
                const reporter = users.find(u => u.id === report.reporterId) || { name: 'Ù…Ø³ØªØ®Ø¯Ù…' };
                const reportType = getReportType(report.reason);
                
                return `
                    <tr>
                        <td>${report.reason.length > 30 ? report.reason.substring(0, 30) + '...' : report.reason}</td>
                        <td>${reportType}</td>
                        <td>${reporter.name}</td>
                        <td>
                            <div class="mod-action-buttons">
                                <button class="mod-action-btn view" onclick="viewReport('${report.id}')">
                                    Ø¹Ø±Ø¶
                                </button>
                                <button class="mod-action-btn approve" onclick="resolveReport('${report.id}')">
                                    Ø­Ù„
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø§Ø±Ø§Øª
        function updateModeratorBadges(governorate) {
            const systemData = JSON.parse(localStorage.getItem('egybook_system') || '{}');
            
            const users = systemData.users || [];
            const posts = systemData.posts || [];
            const reports = systemData.reports || [];
            
            const govUsers = users.filter(u => u.governorate === governorate);
            const govPosts = posts.filter(p => p.governorate === governorate);
            const govReports = reports.filter(r => {
                const post = posts.find(p => p.id == r.postId);
                return post && post.governorate === governorate;
            });
            const govAds = govPosts.filter(p => p.isSponsored).length;
            
            document.getElementById('usersBadge').textContent = govUsers.length;
            document.getElementById('postsBadge').textContent = govPosts.length;
            document.getElementById('reportsBadge').textContent = govReports.length;
            document.getElementById('adsBadge').textContent = govAds;
        }
        
        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        function setupModeratorEvents() {
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
            document.getElementById('logoutBtn').addEventListener('click', function() {
                localStorage.removeItem('current_admin');
                window.location.href = 'login.html';
            });
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            document.getElementById('refreshBtn').addEventListener('click', function() {
                loadGovernorateData();
                showModeratorMessage('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
            });
            
            // Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
            document.querySelectorAll('.moderator-nav a').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.getAttribute('href').substring(1);
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù†Ø´Ø·Ø©
                    document.querySelectorAll('.moderator-nav a').forEach(a => a.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø­Ø¯Ø¯
                    showModeratorSection(section);
                });
            });
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø³Ù…
        function showModeratorSection(section) {
            showModeratorMessage(`Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù‚Ø³Ù… ${section}...`, 'info');
            // (Ø³ÙŠØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø£Ø®Ø±Ù‰ ÙÙŠ ØªØ­Ø¯ÙŠØ«Ø§Øª Ù„Ø§Ø­Ù‚Ø©)
        }
        
        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø©
        function showModeratorMessage(text, type) {
            // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø³Ø§Ù„Ø© Ø¹Ø§Ø¦Ù…Ø©
            const messageDiv = document.createElement('div');
            messageDiv.className = 'mod-message';
            messageDiv.style.cssText = `
                position: fixed;
                top: 100px;
                left: 50%;
                transform: translateX(-50%);
                background: ${type === 'success' ? 'rgba(39,174,96,0.9)' : 
                            type === 'error' ? 'rgba(206,17,38,0.9)' : 
                            'rgba(30,58,138,0.9)'};
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: space-between;
                min-width: 300px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                animation: slideDown 0.3s ease;
            `;
            
            messageDiv.innerHTML = `
                <span>${text}</span>
                <button onclick="this.parentElement.remove()" style="background: none; border: none; color: white; font-size: 20px; cursor: pointer;">âœ•</button>
            `;
            
            document.body.appendChild(messageDiv);
            
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†
            setTimeout(() => {
                if (messageDiv.parentElement) {
                    messageDiv.remove();
                }
            }, 5000);
        }
        
        // Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø©
        function getReportType(reason) {
            if (reason.includes('Ø¥Ø³Ø§Ø¡Ø©') || reason.includes('Ø´ØªÙŠÙ…Ø©')) return 'Ø¥Ø³Ø§Ø¡Ø©';
            if (reason.includes('Ù…Ø­ØªÙˆÙ‰') || reason.includes('ØºÙŠØ± Ù„Ø§Ø¦Ù‚')) return 'Ù…Ø­ØªÙˆÙ‰';
            if (reason.includes('Ø§Ø­ØªÙŠØ§Ù„') || reason.includes('Ù†ØµØ¨')) return 'Ø§Ø­ØªÙŠØ§Ù„';
            return 'Ø£Ø®Ø±Ù‰';
        }
        
        // Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª
        function viewAllPendingPosts() {
            showModeratorMessage('Ø¬Ø§Ø±ÙŠ Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù„Ù‚Ø©...', 'info');
        }
        
        function viewAllReports() {
            showModeratorMessage('Ø¬Ø§Ø±ÙŠ Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª...', 'info');
        }
        
        function viewPost(postId) {
            showModeratorMessage(`Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†Ø´ÙˆØ± ${postId}...`, 'info');
        }
        
        function approvePost(postId) {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø´ÙˆØ±ØŸ')) {
                showModeratorMessage('ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†Ø´ÙˆØ±', 'success');
                loadGovernorateData();
            }
        }
        
        function rejectPost(postId) {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø±ÙØ¶ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø´ÙˆØ± ÙˆØ­Ø°ÙÙ‡ØŸ')) {
                showModeratorMessage('ØªÙ… Ø±ÙØ¶ Ø§Ù„Ù…Ù†Ø´ÙˆØ± ÙˆØ­Ø°ÙÙ‡', 'success');
                loadGovernorateData();
            }
        }
        
        function viewReport(reportId) {
            showModeratorMessage(`Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ù„Ø§Øº ${reportId}...`, 'info');
        }
        
        function resolveReport(reportId) {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø¨Ù„Ø§ØºØŸ')) {
                showModeratorMessage('ØªÙ… Ø­Ù„ Ø§Ù„Ø¨Ù„Ø§Øº Ø¨Ù†Ø¬Ø§Ø­', 'success');
                loadGovernorateData();
            }
        }
        
        // Ø¯ÙˆØ§Ù„ Ø§Ù„ÙÙˆØªØ±
        function showHelp() {
            showModeratorMessage('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ ØµÙØ­Ø© Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©...', 'info');
        }
        
        function showGuidelines() {
            showModeratorMessage('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø±Ø´Ø§Ø¯Ø§Øª...', 'info');
        }
        
        function contactSuperAdmin() {
            showModeratorMessage('Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…Ø´Ø±Ù Ø§Ù„Ø¹Ø§Ù…...', 'info');
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ø£Ù†Ù…Ø§Ø· Ù„Ù„Ø±Ø³Ø§Ø¦Ù„
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideDown {
                from {
                    transform: translate(-50%, -100%);
                    opacity: 0;
                }
                to {
                    transform: translate(-50%, 0);
                    opacity: 1;
                }
            }
            
            .badge {
                background: #ce1126;
                color: white;
                padding: 3px 8px;
                border-radius: 10px;
                font-size: 0.8rem;
                margin-right: auto;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>